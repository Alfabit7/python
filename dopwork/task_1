import random


def Generate_polinomial_dict():
    user_number = int(input('Введите число, коэфицент многочлена: '))
    my_dict = {}
    print()
    # формируем словарь где ключ это степень, а значение это коээфициент Х многочлена
    while user_number != -1:
        my_dict[user_number] = random.randint(1, 100)
        user_number -= 1
    return my_dict


def Generate_string_polinomial(my_dict: dict):
    # Формируем строку polinomial_str многочлена  из словаря my_dict где ключ степень значение коээфициент Х
    polinomial_str = ''
    char_x = 'x'
    for value, ratio in my_dict.items():
        if value != 1 and value != 0:
            polinomial_str = polinomial_str + \
                str(ratio) + char_x + '**' + str(value) + ' + '
        elif value == 0:
            polinomial_str = polinomial_str+' + '+str(ratio)
        else:
            polinomial_str = polinomial_str + str(ratio) + char_x
    return polinomial_str


polinomial_dict = Generate_polinomial_dict()
print(f'polinomial_dict = {polinomial_dict}')

polinomial_string = Generate_string_polinomial(polinomial_dict)
print(f'Convert polinomial_dict to polinomial_string= {polinomial_string}')


def Parsing_string_polinomial_to_dict(polinomial: str):
    polinomial = polinomial.split('+ ')
    new_dict = {}
    j = len(polinomial)-1
    for i in polinomial:
        x_index = i.find('x')
        if x_index != -1:
            new_dict[j] = (i[:x_index])
        else:
            new_dict[j] = i
        j -= 1
    return new_dict


new_polinomial_string = Parsing_string_polinomial_to_dict(polinomial_string)
print(f'Convert polinomial_string to polinomial_dict {new_polinomial_string}')
print()
